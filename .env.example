# CNiS-MCP Server Environment Configuration
# Copy this file to .env and configure your settings

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server mode: stdio (Claude Desktop), http (web/n8n), full (all protocols)
MCP_MODE=stdio

# HTTP server settings (for http/full modes)
PORT=3000
HOST=0.0.0.0

# Node.js environment
NODE_ENV=production

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# =============================================================================
# SECURITY CONFIGURATION (REQUIRED - v1.1.0+)
# =============================================================================

# Authentication settings (REQUIRED)
AUTH_ENABLED=true
JWT_SECRET=your-jwt-secret-key-here-MUST-BE-32-CHARS-MINIMUM
JWT_EXPIRES_IN=24h

# Admin credentials (REQUIRED - Replace defaults!)
ADMIN_USERNAME=your-admin-username-here
ADMIN_PASSWORD=your-secure-admin-password-here

# API key authentication (REQUIRED)
ADMIN_API_KEY=your-admin-api-key-here-change-from-default

# Development API key (OPTIONAL - only for NODE_ENV=development)
DEMO_API_KEY=your-demo-api-key-for-development-only

# CORS settings
CORS_ORIGIN=*
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key
CORS_CREDENTIALS=false

# Rate limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_MESSAGE=Too many requests, please try again later

# Request limits
MAX_REQUEST_SIZE=10mb
REQUEST_TIMEOUT_MS=30000

# =============================================================================
# NEWS COLLECTION CONFIGURATION
# =============================================================================

# Cache settings
CACHE_TTL_MINUTES=15
NEWS_CACHE_SIZE=1000

# News filtering
MAX_NEWS_AGE_HOURS=24
MIN_CREDIBILITY_SCORE=40
MIN_IMPACT_SCORE=50

# RSS fetch settings
RSS_TIMEOUT_MS=10000
RSS_USER_AGENT=CNiS-MCP-Server/2.0.0
RSS_MAX_RETRIES=3

# =============================================================================
# AI ANALYSIS CONFIGURATION (OPTIONAL)
# =============================================================================

# OpenAI API (for enhanced analysis)
OPENAI_API_KEY=your-openai-api-key-here
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000

# Anthropic API (for enhanced analysis)
ANTHROPIC_API_KEY=your-anthropic-api-key-here
ANTHROPIC_MODEL=claude-3-sonnet-20240229
ANTHROPIC_MAX_TOKENS=2000

# Google Gemini API (for enhanced analysis)
GOOGLE_API_KEY=your-google-api-key-here
GOOGLE_MODEL=gemini-pro

# =============================================================================
# DATABASE CONFIGURATION (OPTIONAL)
# =============================================================================

# Redis for caching and rate limiting
REDIS_ENABLED=false
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
REDIS_DB=0

# MongoDB for data storage (optional)
MONGODB_ENABLED=false
MONGODB_URL=mongodb://localhost:27017/cnis-mcp
MONGODB_USERNAME=
MONGODB_PASSWORD=

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log levels: error, warn, info, debug
LOG_LEVEL=info
LOG_FORMAT=json

# Log destinations
LOG_TO_FILE=false
LOG_FILE_PATH=./logs/cnis-mcp.log
LOG_TO_CONSOLE=true

# Request logging
LOG_REQUESTS=true
LOG_RESPONSES=false
LOG_ERRORS=true

# =============================================================================
# RSS FEED SOURCES
# =============================================================================

# Tier 1 Sources (highest trust)
RSS_COINDESK_ENABLED=true
RSS_COINTELEGRAPH_ENABLED=true
RSS_THEBLOCK_ENABLED=true
RSS_DECRYPT_ENABLED=true
RSS_BITCOINMAGAZINE_ENABLED=true

# Official Sources
RSS_SEC_ENABLED=true
RSS_FEDERALRESERVE_ENABLED=false

# Analytics Sources
RSS_GLASSNODE_ENABLED=true
RSS_CRYPTOQUANT_ENABLED=false

# Additional Sources
RSS_COINBUREAU_ENABLED=true
RSS_MESSARI_ENABLED=true

# Custom RSS feeds (comma-separated URLs)
CUSTOM_RSS_FEEDS=

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable features
FEATURE_SENTIMENT_ANALYSIS=true
FEATURE_IMPACT_PREDICTION=true
FEATURE_CREDIBILITY_SCORING=true
FEATURE_CROSS_REFERENCE=true
FEATURE_REAL_TIME_STREAMING=true

# =============================================================================
# SECURITY BEST PRACTICES (v1.1.0+)
# =============================================================================

# ðŸ”’ CRITICAL SECURITY REQUIREMENTS:
# 1. NEVER use default credentials in production
# 2. JWT_SECRET MUST be at least 32 characters (randomly generated)
# 3. ADMIN_USERNAME/PASSWORD must be unique and strong
# 4. ADMIN_API_KEY must be randomly generated (32+ chars)
# 5. Always set AUTH_ENABLED=true for production
# 6. Use HTTPS in production (configure reverse proxy)
# 7. Restrict CORS_ORIGIN to your specific domains
# 8. Enable rate limiting for production workloads

# =============================================================================
# USAGE NOTES
# =============================================================================

# 1. For Claude Desktop integration, use MCP_MODE=stdio
# 2. For n8n integration, use MCP_MODE=http with PORT=3000
# 3. For development, use MCP_MODE=full to enable all protocols
# 4. JWT_SECRET must be at least 32 characters for security
# 5. Set NODE_ENV=production for production deployments
# 6. Redis is recommended for production rate limiting
# 7. WebSocket connections require authentication in production

# =============================================================================
# SECURITY CHECKLIST BEFORE DEPLOYMENT
# =============================================================================

# [ ] Changed all default passwords and API keys
# [ ] JWT_SECRET is 32+ characters and randomly generated
# [ ] AUTH_ENABLED=true
# [ ] NODE_ENV=production
# [ ] CORS_ORIGIN set to specific domains (not *)
# [ ] HTTPS configured (reverse proxy)
# [ ] Rate limiting enabled and configured
# [ ] All environment variables properly set
# [ ] No hardcoded secrets in source code

# Timezone
TZ=UTC